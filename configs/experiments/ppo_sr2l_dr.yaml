defaults:
  - /train/sr2l              # Use SR2L training config
  - /env/realant             # Use RealAnt environment

# Experiment settings
experiment:
  description: "PPO + SR2L + Domain Randomization - Complete robustness solution"
  name: ppo_sr2l_dr
  tags: 
    - ppo
    - sr2l
    - domain-randomization
    - phase5
    - complete-robustness
    - sensor-noise
    - joint-dropout
    - curriculum

# Enable BOTH SR2L and Domain Randomization
sr2l:
  enabled: true
  lambda: 0.001                   # Gentle SR2L for sensor noise robustness
  perturbation_std: 0.01          # Realistic sensor noise levels
  warmup_steps: 2000000           # 2M warmup before SR2L kicks in
  apply_frequency: 4              # Less frequent application
  use_huber_loss: true
  max_perturbation: 0.03

domain_randomization:
  enabled: true
  use_curriculum: true
  
  # Phase 2 settings: Single joint + mild noise (complementing SR2L)
  phase_2_steps: 5000000
  phase_2_config:
    joint_dropout_prob: 0.15     # Slightly lower since SR2L also adds challenge
    max_dropped_joints: 1        # Single joint dropout
    min_dropped_joints: 1
    sensor_noise_std: 0.015      # Lower since SR2L handles sensor noise
    noise_joints_only: true
  
  # Phase 3 settings: Multiple joints + higher noise
  phase_3_steps: 15000000
  phase_3_config:
    joint_dropout_prob: 0.3      # Balanced with SR2L
    max_dropped_joints: 2        # Conservative with SR2L active
    min_dropped_joints: 1
    sensor_noise_std: 0.03       # Moderate since SR2L covers this
    noise_joints_only: true

# Environment settings
env:
  name: RealAntMujoco-v0
  use_target_walking: true       # Goal-directed navigation
  target_distance: 5.0           # Same as baseline
  use_domain_randomization: true # Enable DR wrapper
  
# Extended training for combined approach
total_timesteps: 15000000        

# Initialize from successful baseline
pretrained_model: experiments/ppo_target_walking_llsm451b/best_model/best_model.zip

# Enable W&B logging
logging:
  wandb: true
  wandb_project: "robust-quadruped-rl"
  wandb_entity: "anandpatel1221178-university-of-the-witswatersrand"
  verbose: 1

# Save frequently
save_freq: 100000
eval_freq: 25000