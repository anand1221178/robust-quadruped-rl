defaults:
  - /train/sr2l              # Use SR2L training config
  - /env/realant             # Use RealAnt environment

# Experiment settings
experiment:
  description: "PPO + SR2L FIXED - Bigger network, joint-only perturbations, curriculum learning"
  name: ppo_sr2l_fixed
  tags: 
    - ppo
    - sr2l
    - phase3
    - fixed-implementation
    - bigger-network
    - joint-perturbations
    - curriculum
    - sensor-noise-robustness

# SR2L configuration - FIXED implementation
sr2l:
  enabled: true
  lambda: 0.01                    # Target lambda (reached via curriculum)
  perturbation_std: 0.02          # Joint sensor noise
  warmup_steps: 2000000           # 2M warmup before SR2L starts
  apply_frequency: 4              # Apply less frequently
  max_perturbation: 0.05          # Reasonable max for joint sensors
  use_curriculum: true            # ENABLE curriculum learning
  curriculum_steps: 5000000       # 5M steps to reach full lambda (gradual increase)

# Environment settings - Use target walking (proven to work)
env:
  name: RealAntMujoco-v0
  use_target_walking: true       # Goal-directed navigation
  target_distance: 5.0           # Same as baseline
  
# CRITICAL: Use pretrained model (from-scratch fails)
pretrained_model: experiments/ppo_target_walking_llsm451b/best_model/best_model.zip

# Longer training for curriculum learning
total_timesteps: 20000000        # 20M steps

# BIGGER NETWORK ARCHITECTURE (key fix!)
policy:
  hidden_sizes:
    - 256                        # Much larger than [64, 128]
    - 256                        # Quadruped papers use this size
  activation: tanh               # Smoother gradients than relu

# PPO hyperparameters - slightly adjusted for complexity
ppo:
  learning_rate: 0.0002          # Slightly lower for stability
  n_steps: 2048                  # Keep same
  batch_size: 2048               # Keep same
  n_epochs: 10                   # Keep same
  gamma: 0.99
  gae_lambda: 0.95
  clip_range: 0.2
  ent_coef: 0.0                  # No entropy bonus
  vf_coef: 0.5
  max_grad_norm: 0.5             # Important for SR2L stability

# Enable W&B logging
logging:
  wandb: true
  wandb_project: "robust-quadruped-rl"
  wandb_entity: "anandpatel1221178-university-of-the-witswatersrand"
  verbose: 1

# Save frequently to monitor curriculum progress
save_freq: 100000
eval_freq: 25000